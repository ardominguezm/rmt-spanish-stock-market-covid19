# Random Matrix Theory Analysis of the Spanish Stock Market Around COVID-19

**Repository supporting the article:**

Domínguez-Monterroza, A., Jiménez-Martín, A., & Mateos-Caballero, A. (2025).  
*Correlation Structure of the Spanish Stock Market Around COVID-19 Using Random Matrix Theory.*  
Computational Economics, 66, 4543–4558.  
https://doi.org/10.1007/s10614-024-10820-0

---
## Funding

This research was supported by the following grants:

- **PID2021-122209OB-C31**, funded by *MICIU/AEI/10.13039/501100011033*  
- **RED2022-134540-T**, funded by *MICIU/AEI/10.13039/501100011033*

## Overview

This repository contains the complete code, data processing pipeline, and reproducible workflow used to generate the results and figures of the published study.  
It provides a full Random Matrix Theory (RMT) analysis of the Spanish stock market (IBEX35 + IBEX Medium Cap) before, during, and after the COVID-19 pandemic.

The repository includes:

- Data preprocessing for stock price time series (2018–2023)
- Construction of correlation matrices for multiple periods
- Computation of eigenvalues and eigenvectors
- Comparison with the Marčenko–Pastur distribution
- Dynamic sliding-window analysis of the maximum eigenvalue
- Generation of all figures included in the publication
- Ready-to-use scripts for reproducibility and extension

This project is structured to be fully reproducible and citable.  
A Zenodo release with a DOI will be linked in this section once generated.

---

## Repository Structure

```
rmt-spanish-stock-market-covid19/
│
├── data/
│   ├── raw/              # Raw downloaded price data (Yahoo Finance)
│   ├── processed/        # Log-returns, aligned series, correlation matrices
│   └── external/         # Supporting reference lists or metadata
│
├── src/
│   ├── 01_download_data.py
│   ├── 02_preprocess.py
│   ├── 03_compute_correlations.py
│   ├── 04_rmt_analysis.py
│   ├── 05_generate_figures.py
│   └── utils.py
│
├── notebooks/
│   └── RMT_Spain.ipynb   # Full analysis notebook
│
├── results/
│   ├── figures/          # All generated figures
│   └── tables/           # Any exported tables
│
├── environment.yml        # Conda environment for reproducibility
├── requirements.txt       # Pip-based alternative
├── LICENSE
└── README.md
```

---

## Methods Summary

This project applies Random Matrix Theory to analyze financial correlations:

- Construction of empirical correlation matrices for multiple periods  
- Spectral decomposition and eigenvalue filtering  
- Comparison with the Marčenko–Pastur bounds  
- Identification of collective market modes (λ₁) and sectoral modes (λ₂)  
- Time-varying RMT analysis using rolling windows  
- Eigenportfolio construction and validation via linear regression  

All figures (1–7) in the published article are generated by the scripts in `src/`.

---

## How to Reproduce

1. Clone this repository  
   ```bash
   git clone https://github.com/<your-user>/rmt-spanish-stock-market-covid19.git
   cd rmt-spanish-stock-market-covid19
   ```

2. Create the environment  
   ```bash
   conda env create -f environment.yml
   conda activate rmt-rmt
   ```

3. Download data  
   ```bash
   python src/01_download_data.py
   ```

4. Compute correlation matrices  
   ```bash
   python src/03_compute_correlations.py
   ```

5. Run the full RMT analysis  
   ```bash
   python src/04_rmt_analysis.py
   ```

6. Generate all figures  
   ```bash
   python src/05_generate_figures.py
   ```

---
## Data Source

All financial time series used in this project were obtained from **Yahoo Finance** using the official public API through the `yfinance` Python library. The dataset includes daily adjusted closing prices for all companies listed in the **IBEX35** and **IBEX Medium Cap (IBEXC)** indices between January 2018 and March 2023.

To ensure consistency throughout the three analyzed periods (pre-COVID, during COVID, post-COVID), only stocks that remained listed in the indices during the full time span were included. Companies temporarily added or removed from the indices were handled following the methodological guidelines described in the published article.

Users replicating this repository should download the data via the script:

```bash
python src/01_download_data.py
```

The raw data will be automatically stored in:

```
data/raw/
```

Processed log-return series and correlation matrices are generated programmatically and stored under:

```
data/processed/
```

## Citation

If you use this code or reproduce these results, please cite:

Domínguez-Monterroza, A., Jiménez-Martín, A., & Mateos-Caballero, A. (2025).  
*Correlation Structure of the Spanish Stock Market Around COVID-19 Using Random Matrix Theory.*  
Computational Economics, 66, 4543–4558.  
https://doi.org/10.1007/s10614-024-10820-0

A Zenodo DOI for the code and dataset will be added once the release is published.

---

## License

This project is released under the MIT License.

---

## Contact

For questions or collaboration requests, please contact:  
**Andy Domínguez-Monterroza**  
Email: andydomi@ucm.es
